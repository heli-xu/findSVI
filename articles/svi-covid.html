<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>SVI and Health Outcome • findSVI</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="SVI and Health Outcome">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">findSVI</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/findSVI.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/custom_geo.html">SVI Calculation for Custom Geographic Boundaries</a></li>
    <li><a class="dropdown-item" href="../articles/geo_context_of_svi.html">Geographic Context of SVI</a></li>
    <li><a class="dropdown-item" href="../articles/svi-covid.html">SVI and Health Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/SVI-mapping.html">Mapping SVI for Spatial Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/svi-validation.html">Validation of SVI results</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/heli-xu/findSVI/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>SVI and Health Outcome</h1>
            <h3 data-toc-skip class="subtitle">SVI and COVID-19
hospitalizations in Philadelphia</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/heli-xu/findSVI/blob/main/vignettes/articles/svi-covid.Rmd" class="external-link"><code>vignettes/articles/svi-covid.Rmd</code></a></small>
      <div class="d-none name"><code>svi-covid.Rmd</code></div>
    </div>

    
    
<p>Designed to represent the relative resilience of communities within
an area, SVI not only provides valuable information for local
officials/policymakers in planning and managing public health
emergencies, but also offers an important neighborhood metric to
facilitate public health research, such as the correlation between
health outcome and SVI (and the socioeconomic/demographic factors
involved) of a certain area.</p>
<p>For example, to investigate the possible correlation between the
COVID-19-related deaths and SVI in Philadelphia at the ZCTA level, we
could use findSVI to get ZCTA-level SVI for Philadelphia (with geometry)
and join the result with ZCTA-level COVID-19 data for visualization and
correlation analysis.</p>
<p>As usual, we start with loading all the packages needed.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/heli-xu/findSVI" class="external-link">findSVI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/cowplot/" class="external-link">cowplot</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="zcta-level-svi-in-philadelphia-for-2020">ZCTA-level SVI in Philadelphia for 2020<a class="anchor" aria-label="anchor" href="#zcta-level-svi-in-philadelphia-for-2020"></a>
</h2>
<p>For retrieving census data with geometry, we’ll use
<code><a href="../reference/get_census_data.html">get_census_data()</a></code> and <code><a href="../reference/get_svi.html">get_svi()</a></code> to obtain SVI.
We’ll keep the GEOID(ZCTA) and SVI-related columns in the resulting SVI
table.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">phl_zcta_2020_geo_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_census_data.html">get_census_data</a></span><span class="op">(</span></span>
<span>  <span class="fl">2020</span>,</span>
<span>  geography <span class="op">=</span> <span class="st">"zcta"</span>,</span>
<span>  state <span class="op">=</span> <span class="st">"PA"</span>,</span>
<span>  county <span class="op">=</span> <span class="st">"Philadelphia"</span>,</span>
<span>  geometry <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">phl_zcta_2020_geo_svi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_svi.html">get_svi</a></span><span class="op">(</span><span class="fl">2020</span>,</span>
<span>  data <span class="op">=</span> <span class="va">phl_zcta_data_geo_2020</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">GEOID</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"RPL_theme"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">phl_zcta_2020_geo_svi</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Simple feature collection with 48 features and 6 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -75.28027 ymin: 39.84987 xmax: -74.95578 ymax: 40.13799</span></span>
<span><span class="co">#&gt; Geodetic CRS:  NAD83</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 48 × 7</span></span></span>
<span><span class="co">#&gt;    GEOID RPL_theme1 RPL_theme2 RPL_theme3 RPL_theme4 RPL_themes</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 19102     0.044<span style="text-decoration: underline;">4</span>     0.022<span style="text-decoration: underline;">2</span>     0.088<span style="text-decoration: underline;">9</span>      0.956     0.178 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 19103     0.022<span style="text-decoration: underline;">2</span>     0.222      0.178       0.933     0.267 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 19104     0.689      0.2        0.556       0.978     0.689 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 19106     0          0.111      0.044<span style="text-decoration: underline;">4</span>      0.711     0.044<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 19107     0.333      0.066<span style="text-decoration: underline;">7</span>     0.4         1         0.378 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 19109    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 19111     0.578      0.867      0.511       0.578     0.711 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 19112    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 19114     0.178      0.422      0.156       0.111     0.2   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 19115     0.378      0.822      0.289       0.822     0.533 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 38 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: geometry &lt;MULTIPOLYGON [°]&gt;</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="zcta-level-covid-19-data-in-philadelphia">ZCTA-level COVID-19 data in Philadelphia<a class="anchor" aria-label="anchor" href="#zcta-level-covid-19-data-in-philadelphia"></a>
</h2>
<p>Disease-related data at the ZCTA level is usually not easily
accessible for privacy reasons. Here, we’ll use data from the <a href="https://drexel-uhc.shinyapps.io/bchc_covid19/_w_0444d5bc/_w_e6851016/_w_6d75b9f7/" class="external-link">COVID-19
Health Inequities in Cities Dashboard</a>, a great resource released by
Drexel University’s Urban Health Collaborative and the Big Cities Health
Coalition (BCHC). In addition to data available for download, the
dashboard provides informative visualizations of COVID-19 related
outcomes and inequities over time and across BCHC cities.</p>
<p>After downloading the raw data, we can select Philadelphia city and
the variables of interest (hospitalization per 100k).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#source:https://github.com/Drexel-UHC/covid_inequities_project</span></span>
<span><span class="co">#bchc_raw &lt;- read_csv("../../byZCTA_bchc.csv")</span></span>
<span></span>
<span><span class="va">phl_hosp</span> <span class="op">&lt;-</span> <span class="va">bchc_raw</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">city</span> <span class="op">==</span> <span class="st">"Philadelphia"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>GEOID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">zcta</span><span class="op">)</span>, .after <span class="op">=</span> <span class="va">zcta</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">GEOID</span>, <span class="va">hosp_per_100k</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">phl_hosp</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Rows: 46</span></span>
<span><span class="co">#&gt; Columns: 2</span></span>
<span><span class="co">#&gt; $ GEOID         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "19102", "19103", "19104", "19106", "19107", "19111", "1…</span></span>
<span><span class="co">#&gt; $ hosp_per_100k <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 194.288, 846.618, 1280.807, 405.019, 1555.831, 1133.411,…</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="joining-data-for-visualzation">Joining data for visualzation<a class="anchor" aria-label="anchor" href="#joining-data-for-visualzation"></a>
</h2>
<p>Once we have the ZCTA-level SVI and COVID-19 data ready, we can join
them together by GEOID(ZCTA), keeping the spatial information.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">phl_svi_covid</span> <span class="op">&lt;-</span> <span class="va">phl_hosp</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">phl_zcta_2020_geo_svi</span>, by <span class="op">=</span> <span class="st">"GEOID"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co">#although geometry sticky, after wrangling, class() become df</span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>sf_column_name <span class="op">=</span> <span class="st">"geometry"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">phl_svi_covid</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">GEOID</span>, <span class="va">NAME</span>, <span class="va">hosp_per_100k</span>, <span class="va">RPL_themes</span>, <span class="va">geometry</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 10 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -75.24074 ymin: 39.92578 xmax: -74.97371 ymax: 40.13799</span></span>
<span><span class="co">#&gt; Geodetic CRS:  NAD83</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 5</span></span></span>
<span><span class="co">#&gt;    GEOID NAME        hosp_per_100k RPL_themes                           geometry</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;MULTIPOLYGON [°]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 19102 ZCTA5 19102          194.     0.178  (((-75.16854 39.94663, -75.16845 …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 19103 ZCTA5 19103          847.     0.267  (((-75.18166 39.95151, -75.18091 …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 19104 ZCTA5 19104         <span style="text-decoration: underline;">1</span>281.     0.689  (((-75.21367 39.96003, -75.21204 …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 19106 ZCTA5 19106          405.     0.044<span style="text-decoration: underline;">4</span> (((-75.15476 39.94573, -75.15449 …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 19107 ZCTA5 19107         <span style="text-decoration: underline;">1</span>556.     0.378  (((-75.16506 39.95361, -75.16332 …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 19111 ZCTA5 19111         <span style="text-decoration: underline;">1</span>133.     0.711  (((-75.10653 40.04938, -75.10457 …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 19114 ZCTA5 19114         <span style="text-decoration: underline;">1</span>336.     0.2    (((-75.03509 40.07462, -75.03081 …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 19115 ZCTA5 19115         <span style="text-decoration: underline;">1</span>502.     0.533  (((-75.07456 40.08912, -75.07127 …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 19116 ZCTA5 19116         <span style="text-decoration: underline;">1</span>226.     0.489  (((-75.04426 40.11571, -75.04386 …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 19118 ZCTA5 19118         <span style="text-decoration: underline;">1</span>038.     0.133  (((-75.24022 40.0836, -75.23895 4…</span></span></code></pre></div>
<div class="section level4">
<h4 id="maps">Maps<a class="anchor" aria-label="anchor" href="#maps"></a>
</h4>
<p>To visualize their spatial pattern directly, we can plot the SVI and
COVID-19 data in Philadelphia neighborhoods (ZCTAs) directly on
maps:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="va">phl_svi_covid</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">GEOID</span>, <span class="va">geometry</span>, <span class="va">RPL_themes</span>, <span class="va">hosp_per_100k</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># function for map</span></span>
<span><span class="va">plot_phl</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">var</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="op">{</span><span class="op">{</span><span class="va">var</span><span class="op">}</span><span class="op">}</span>,</span>
<span>      breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="op">{</span><span class="op">{</span><span class="va">var</span><span class="op">}</span><span class="op">}</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span>, dig.lab <span class="op">=</span> <span class="fl">4</span>, include.lowest <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      size <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="fl">26915</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>      legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>      axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>      panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>      legend.position <span class="op">=</span> <span class="st">"inside"</span>,</span>
<span>      legend.position.inside <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">0.03</span><span class="op">)</span>,</span>
<span>      legend.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span>,</span>
<span>      legend.key.size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>      plot.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, fill<span class="op">=</span><span class="cn">NA</span>, linewidth <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>      plot.margin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span>, <span class="st">"cm"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># assemble plots</span></span>
<span><span class="va">svi</span> <span class="op">&lt;-</span> <span class="fu">plot_phl</span><span class="op">(</span><span class="va">plot_data</span>, <span class="va">RPL_themes</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Overall SVI (2020)"</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0.0 - 0.2"</span>, <span class="st">"0.2 - 0.4"</span>, <span class="st">"0.4 - 0.6"</span>, <span class="st">"0.6 - 0.8"</span>, <span class="st">"0.8 - 1.0"</span><span class="op">)</span>,</span>
<span>    palette <span class="op">=</span> <span class="st">"Blues"</span></span>
<span>  <span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Social Vulnerability"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">13</span>, hjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>, vjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid_hosp</span> <span class="op">&lt;-</span> <span class="fu">plot_phl</span><span class="op">(</span><span class="va">plot_data</span>, <span class="va">hosp_per_100k</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Hospitalizations/100k"</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"194 - 1,038"</span>, <span class="st">"1,038 - 1,336"</span>, <span class="st">"1,336 - 1,654"</span>, <span class="st">"1,654 - 1,921"</span>, <span class="st">"1,921 - 2,913"</span><span class="op">)</span>,</span>
<span>    palette <span class="op">=</span> <span class="st">"YlOrBr"</span></span>
<span>  <span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"COVID-19 Hospitalizations"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">13</span>, hjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.2</span>, vjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">maps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://wilkelab.org/cowplot/reference/plot_grid.html" class="external-link">plot_grid</a></span><span class="op">(</span><span class="va">svi</span>, <span class="va">covid_hosp</span><span class="op">)</span></span>
<span></span>
<span><span class="va">title</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://wilkelab.org/cowplot/reference/ggdraw.html" class="external-link">ggdraw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://wilkelab.org/cowplot/reference/draw_label.html" class="external-link">draw_label</a></span><span class="op">(</span></span>
<span>    <span class="st">"SVI and COVID-19 hospitalizations in Philadelphia Neighborhoods"</span>,</span>
<span>    fontface <span class="op">=</span> <span class="st">'bold'</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">14</span>,</span>
<span>    x <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    hjust <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">margin</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">caption</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://wilkelab.org/cowplot/reference/ggdraw.html" class="external-link">ggdraw</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://wilkelab.org/cowplot/reference/draw_label.html" class="external-link">draw_label</a></span><span class="op">(</span></span>
<span>    <span class="st">"COVID-19 data are cumulative till 8/2022"</span>, </span>
<span>    size <span class="op">=</span> <span class="fl">9</span>,</span>
<span>    x <span class="op">=</span> <span class="fl">0.6</span>,</span>
<span>    hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">margin</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">7</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/plot_grid.html" class="external-link">plot_grid</a></span><span class="op">(</span></span>
<span>  <span class="va">title</span>, <span class="va">maps</span>, <span class="va">caption</span>,</span>
<span>  ncol <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  rel_heights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">1</span>, <span class="fl">0.05</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="svi-covid_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="correlation">Correlation<a class="anchor" aria-label="anchor" href="#correlation"></a>
</h4>
<p>To look at possible correlation between SVI and COVID-19
hospitalizations, we’ll use scatter plot to visualize their
relationships:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">phl_svi_covid</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">RPL_themes</span>, y <span class="op">=</span> <span class="va">hosp_per_100k</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Social Vulnerability and COVID-19 Hospitalizations \nin Philadelphia Neighborhoods"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"COVID-19 data are cumulative till 8/2022"</span>, </span>
<span>    x <span class="op">=</span> <span class="st">"Overall SVI (2020)"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Hospitalizations per 100k"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">13</span><span class="op">)</span>,</span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">14</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">13</span><span class="op">)</span>,</span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">9</span>, color <span class="op">=</span> <span class="st">"#4D4948"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="svi-covid_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>With a correlation coefficient of 0.7030584, overall SVI is shown to
be strongly associated with COVID-19 hospitalizations in Philadelphia
neighborhoods, where higher hospitalization rate is found in
neighborhoods with higher social vulnerability.</p>
<p>This is consistent with the story on the <a href="https://drexel-uhc.shinyapps.io/bchc_covid19/_w_8408f640/" class="external-link">COVID-19
Health Inequities in Cities Dashboard</a>, where they found most
socially vulnerable neighborhoods have 129.4% higher hospitalizations
per 100k compared to the least socially vulnerable neighborhoods.</p>
</div>
</div>
<div class="section level2">
<h2 id="reference">Reference<a class="anchor" aria-label="anchor" href="#reference"></a>
</h2>
<p>Diez Roux, A., Kolker, J., Barber, S., Bilal, U., Mullachery, P.,
Schnake-Mahl, A., McCulley, E., Vaidya, V., Ran, L., Rollins, H.,
Furukawa, A., Koh, C., Sharaf, A., Dureja, K. (2021). COVID-19 Health
Inequities In Cities Dashboard. Drexel University: Urban Health
Collaborative. <a href="http://www.covid-inequities.info/" class="external-link uri">http://www.covid-inequities.info/</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Heli Xu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
