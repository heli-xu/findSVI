<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="findSVI">
<title>Introduction to findSVI • findSVI</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to findSVI">
<meta property="og:description" content="findSVI">
<meta property="og:image" content="https://heli-xu.github.io/findSVI/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">findSVI</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/findSVI.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/SVI-mapping.html">Mapping SVI for Spatial Analysis</a>
    <a class="dropdown-item" href="../articles/geo_context_of_svi.html">Geographic Context of SVI</a>
    <a class="dropdown-item" href="../articles/svi-covid.html">SVI and health outcome</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/heli-xu/findSVI/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to findSVI</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/heli-xu/findSVI/blob/HEAD/vignettes/findSVI.Rmd" class="external-link"><code>vignettes/findSVI.Rmd</code></a></small>
      <div class="d-none name"><code>findSVI.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/heli-xu/findSVI" class="external-link">findSVI</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="what-is-svi">What is SVI<a class="anchor" aria-label="anchor" href="#what-is-svi"></a>
</h2>
<p>First introduced in 2011 (Flanagan BE, Gregory EW, Hallisey EJ,
Heitgerd JL, Lewis B.), the CDC/ATSDR Social Vulnerability Index (SVI)
serves as a tool to assess the resilience of communities by considering
socioeconomic and demographic factors. This valuable information plays a
crucial role in preparing for and managing public health emergencies, as
it enables effective planning of social services and public assistance.
The CDC/ATSDR Social Vulnerability Index (CDC/ATSDR SVI) utilizes 16
U.S. census variables grouped into 4 domains/themes, and obtains a
relative vulnerability level using percentile ranks for each geographic
unit within a region. Communities with higher SVI are considered more
vulnerable in public health crisis. For more details, please refer to <a href="https://www.atsdr.cdc.gov/placeandhealth/svi/index.html" class="external-link">CDC/ATSDR
SVI website</a>.</p>
</div>
<div class="section level2">
<h2 id="why-we-might-need-to-calculate-svi">Why we might need to calculate SVI<a class="anchor" aria-label="anchor" href="#why-we-might-need-to-calculate-svi"></a>
</h2>
<p>CDC/ATSDR releases SVI biannually <a href="https://www.atsdr.cdc.gov/placeandhealth/svi/data_documentation_download.html" class="external-link">here</a>
in both shapefile and csv format, at the counties/census tracts level
within an individual state or in the US. While the SVI database is very
useful, sometimes we would prefer more up-to-date census data or
different geographic levels. For example, if we’d like to address
questions about ZCTA-level SVI of Pennsylvania in 2021, or census
tract-level SVI within a few counties in Pennsylvania in 2020, we might
need to calculate SVI from the census data ourselves.</p>
<p>findSVI aims to support more flexible and specific SVI analysis in
these cases with additional options for years (2012-2021) and geographic
levels (eg. ZCTA/places, combining multiple states).</p>
<p>This document introduces you to the datasets and basic tools of
findSVI for census data retrieval and SVI calculation.</p>
</div>
<div class="section level2">
<h2 id="data-census-variables">Data: census variables<a class="anchor" aria-label="anchor" href="#data-census-variables"></a>
</h2>
<div class="section level4">
<h4 id="census-variables-and-calculation-table">Census variables and calculation table<a class="anchor" aria-label="anchor" href="#census-variables-and-calculation-table"></a>
</h4>
<p>To retrieve census data and calculate SVI based on CDC/ATSDR
documentation, a series of lists and tables containing census variables
information are included in the package.</p>
<ul>
<li>census_variables_(2012-2021): Each list contains the year-specific
census variables needed for SVI calculation.</li>
<li>variable_ep_calculation_(2012-2021): Each table contains the SVI
variable names, their theme group and corresponding census variable(s)
and calculation formula.</li>
</ul>
<p>These datasets are documented in <code><a href="../reference/census_variables.html">?census_variables</a></code> and
<code><a href="../reference/variable_calculation.html">?variable_calculation</a></code>.</p>
</div>
<div class="section level4">
<h4 id="zcta-state-relationship-file-crosswalk">ZCTA-state relationship file (crosswalk)<a class="anchor" aria-label="anchor" href="#zcta-state-relationship-file-crosswalk"></a>
</h4>
<p>Currently, <code><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">tidycensus::get_acs()</a></code> does not support
requests for state-specific ZCTA-level data starting 2019(subject
table)/2020(all tables). This is likely due to changes in Census API, as
ZCTAs are not subgeographies of states (some ZCTAs cross state
boundaries). To obtain state-specific ZCTA-level data, three atasets of
ZCTA-to-state crosswalks are included to help selecting the ZCTAs in the
state(s) of interest after retrieving the ZCTA data at the national
level.</p>
<p>These crosswalk files are documented in
<code><a href="../reference/zcta_state_xwalk.html">?zcta_state_xwalk</a></code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="retrieve-census-data-with-get_census_data">Retrieve census data with <code>get_census_data()</code><a class="anchor" aria-label="anchor" href="#retrieve-census-data-with-get_census_data"></a>
</h2>
<p><code><a href="../reference/get_census_data.html">get_census_data()</a></code> uses
<code><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">tidycensus::get_acs()</a></code> with a pre-defined list of variables
to retrieves ACS data for SVI calculation. The list of census variables
is built in the function, and changes according to the year of interest.
Importantly, a Census API key is required for this function to work,
which can be obtained <a href="https://api.census.gov/data/key_signup.html" class="external-link">online</a> and set up
by <code>census_api_key("YOUR KEY GOES HERE")</code>. The arguments are
largely the same with [tidycensus::get_acs()], including year, geography
and state.</p>
<p>For example, we can retrieve ZCTA-level data for Rhode Island for
2018:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/heli-xu/findSVI" class="external-link">findSVI</a></span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_census_data.html">get_census_data</a></span><span class="op">(</span><span class="fl">2018</span>, <span class="st">"zcta"</span>, <span class="st">"RI"</span><span class="op">)</span></span>
<span><span class="va">data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;    GEOID        NAME B17001_002E B17001_002M B19301_001E B19301_001M</span></span>
<span><span class="co">#&gt; 1  02802 ZCTA5 02802         154         190       24925       14640</span></span>
<span><span class="co">#&gt; 2  02804 ZCTA5 02804         130          91       39065        6412</span></span>
<span><span class="co">#&gt; 3  02806 ZCTA5 02806         520         183       61534        3820</span></span>
<span><span class="co">#&gt; 4  02807 ZCTA5 02807          73          33       39287        7937</span></span>
<span><span class="co">#&gt; 5  02808 ZCTA5 02808         162         166       29356        3819</span></span>
<span><span class="co">#&gt; 6  02809 ZCTA5 02809        1619         368       34252        2269</span></span>
<span><span class="co">#&gt; 7  02812 ZCTA5 02812          31          52       41718        5771</span></span>
<span><span class="co">#&gt; 8  02813 ZCTA5 02813         605         271       42612        4889</span></span>
<span><span class="co">#&gt; 9  02814 ZCTA5 02814         722         253       37750        3056</span></span>
<span><span class="co">#&gt; 10 02815 ZCTA5 02815          13          21       71975       22744</span></span>
<span><span class="co">#&gt;    B06009_002E B06009_002M B09001_001E B09001_001M</span></span>
<span><span class="co">#&gt; 1           80          87         220         161</span></span>
<span><span class="co">#&gt; 2           56          45         331         156</span></span>
<span><span class="co">#&gt; 3          383         111        4375         204</span></span>
<span><span class="co">#&gt; 4           19          22         143          87</span></span>
<span><span class="co">#&gt; 5          272         146         598         271</span></span>
<span><span class="co">#&gt; 6         2077         370        3201         241</span></span>
<span><span class="co">#&gt; 7           72          60         323         144</span></span>
<span><span class="co">#&gt; 8          411         157        1265         147</span></span>
<span><span class="co">#&gt; 9          381         115        1489         170</span></span>
<span><span class="co">#&gt; 10           0          13          74         113</span></span></code></pre>
<p>(only first 10 rows and columns are shown)</p>
<p>Note that for ZCTA-level after 2018, data retrieving by state is not
supported by Census API/tidycensus. For such requests,
<code><a href="../reference/get_census_data.html">get_census_data()</a></code> first retrieves ZCTA-level data for the
whole country, and then uses the ZCTA-to-state relationship file
(crosswalk) to select the ZCTAs in the state(s) of interest. This
results in a longer running time for these requests.</p>
</div>
<div class="section level2">
<h2 id="compute-svi-with-get_svi">Compute SVI with <code>get_svi()</code><a class="anchor" aria-label="anchor" href="#compute-svi-with-get_svi"></a>
</h2>
<p><code><a href="../reference/get_svi.html">get_svi()</a></code> takes the year and census data (retrieved by
<code><a href="../reference/get_census_data.html">get_census_data()</a></code>) as arguments, and calculate the SVI
based on <a href="https://www.atsdr.cdc.gov/placeandhealth/svi/data_documentation_download.html" class="external-link">CDC/ATSDR
documentation</a>. This function uses the built-in
<code>variable_calculation</code> tables and populate the SVI variables
with census variables directly, or basic summation/percentage
calculation of census variables. For each SVI variable,a geographic unit
is ranked against the others in the selected region, followed by summing
up rankings for variables within each theme to perform percentile
ranking again as the SVI for each theme and overall SVI.</p>
<p>For example, to obtain ZCTA-level SVI for Rhode Island for 2018:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_svi.html">get_svi</a></span><span class="op">(</span><span class="fl">2018</span>, <span class="va">data</span><span class="op">)</span></span>
<span><span class="va">result</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;    GEOID        NAME E_TOTPOP E_HU E_HH E_POV E_UNEMP E_PCI E_NOHSDP E_AGE65</span></span>
<span><span class="co">#&gt; 1  02802 ZCTA5 02802      671  314  223   154      18 24925       80      15</span></span>
<span><span class="co">#&gt; 2  02804 ZCTA5 02804     2004  947  840   130      12 39065       56     351</span></span>
<span><span class="co">#&gt; 3  02806 ZCTA5 02806    16192 6393 6111   520     244 61534      383    2680</span></span>
<span><span class="co">#&gt; 4  02807 ZCTA5 02807      827 1856  429    73      21 39287       19     221</span></span>
<span><span class="co">#&gt; 5  02808 ZCTA5 02808     2565  969  889   162     171 29356      272     267</span></span>
<span><span class="co">#&gt; 6  02809 ZCTA5 02809    22258 9181 8442  1619     424 34252     2077    4578</span></span>
<span><span class="co">#&gt; 7  02812 ZCTA5 02812     1208  402  402    31      44 41718       72     144</span></span>
<span><span class="co">#&gt; 8  02813 ZCTA5 02813     7780 5173 3200   605     330 42612      411    1733</span></span>
<span><span class="co">#&gt; 9  02814 ZCTA5 02814     7673 3350 2903   722     167 37750      381    1207</span></span>
<span><span class="co">#&gt; 10 02815 ZCTA5 02815      208   76   76    13       0 71975        0      16</span></span></code></pre>
<p>(Only first 10 rows and columns are shown. The columns included are
some of the individual SVI variables.)</p>
</div>
<div class="section level2">
<h2 id="wrapper-and-more-find_svi">Wrapper and more: <code>find_svi()</code><a class="anchor" aria-label="anchor" href="#wrapper-and-more-find_svi"></a>
</h2>
<p>To retrieve census data and compute SVI in one step, we could use
<code><a href="../reference/find_svi.html">find_svi()</a></code>. While <code><a href="../reference/get_census_data.html">get_census_data()</a></code> only
accepts a single year for <code>year</code> (and multiple states for
<code>state</code>) just like <code><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">tidycensus::get_acs()</a></code>,
<code><a href="../reference/find_svi.html">find_svi()</a></code> accepts pairing vectors of <code>year</code> and
<code>state</code> for the SAME geography level. This allows processing
multiple year-state combinations in one function, with separate data
retrieval and SVI calculation for every year-state entry and returning a
summarised SVI table for all pairs of year-state values.</p>
<p>One important difference in data retrieval between
<code><a href="../reference/find_svi.html">find_svi()</a></code> and <code><a href="../reference/get_census_data.html">get_census_data()</a></code> is that the
year-state combinations will always be evaluated as “one year and one
state” – that is, the option to get census data for multiple states at
once (for one year) in <code><a href="../reference/get_census_data.html">get_census_data()</a></code> will be disabled
in <code><a href="../reference/find_svi.html">find_svi()</a></code>. There is an exception to this one-on-one
rule, when a single year is supplied into <code>year</code>, you can set
the <code>state = NULL</code> as default to perform nation-level data
retrieval and SVI calculation.</p>
<p>For SVI table output, <code><a href="../reference/find_svi.html">find_svi()</a></code> by default returns a
summarised SVI table with only the GEOID, theme-specific SVIs and SVI
for all 4 themes for each year-state combination. Alternatively, there’s
an option to return a full SVI table with every SVI variable and
intermediate ranking values (as <code><a href="../reference/get_svi.html">get_svi()</a></code>) by setting
<code>full.table = TRUE</code>. For both options, corresponding year and
state information will be included as two separate columns in the
table.</p>
<div class="section level4">
<h4 id="single-year-state-entry">Single year-state entry<a class="anchor" aria-label="anchor" href="#single-year-state-entry"></a>
</h4>
<p>Using the same example as above, to obtain ZCTA-level census data and
calculate SVI for Rhode Island for 2018 in one step:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">onestep_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_svi.html">find_svi</a></span><span class="op">(</span><span class="fl">2018</span>, <span class="st">"RI"</span>, <span class="st">"zcta"</span><span class="op">)</span></span>
<span><span class="va">onestep_result</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 8</span></span></span>
<span><span class="co">#&gt;    GEOID RPL_theme1 RPL_theme2 RPL_theme3 RPL_theme4 RPL_themes  year state</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 02802     0.921       1          0.803      0.447     0.855   <span style="text-decoration: underline;">2</span>018 RI   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 02804     0.224       0.171      0          0.158     0.118   <span style="text-decoration: underline;">2</span>018 RI   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 02806     0.039<span style="text-decoration: underline;">5</span>      0.342      0.487      0.224     0.158   <span style="text-decoration: underline;">2</span>018 RI   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 02807     0.316       0.724      0.145      0.816     0.526   <span style="text-decoration: underline;">2</span>018 RI   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 02808     0.829       0.210      0.276      0         0.224   <span style="text-decoration: underline;">2</span>018 RI   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 02809     0.645       0.263      0.592      0.474     0.553   <span style="text-decoration: underline;">2</span>018 RI   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 02812     0.447       0.316      0.316      0         0.145   <span style="text-decoration: underline;">2</span>018 RI   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 02813     0.618       0.382      0.171      0.632     0.460   <span style="text-decoration: underline;">2</span>018 RI   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 02814     0.5         0.487      0.224      0.342     0.382   <span style="text-decoration: underline;">2</span>018 RI   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 02815     0.026<span style="text-decoration: underline;">3</span>      0.513      0.342      0         0.078<span style="text-decoration: underline;">9</span>  <span style="text-decoration: underline;">2</span>018 RI</span></span></code></pre>
<p>This is a glimpse of the first 10 rows of the summarised SVI table
(with only GEOID and SVIs), with additional columns indicating the year
and state information.</p>
</div>
<div class="section level4">
<h4 id="multiple-year-state-entries">Multiple year-state entries<a class="anchor" aria-label="anchor" href="#multiple-year-state-entries"></a>
</h4>
<p>For multiple year-state combinations, we could supply two vectors to
<code>year</code> and <code>state</code> arguments and they’ll be
treated as pairs. For example, to obtain county-level SVI of New Jersey
and Pennsylvania for 2017 and 2018, respectively:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summarise_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_svi.html">find_svi</a></span><span class="op">(</span></span>
<span>  year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2017</span>, <span class="fl">2018</span><span class="op">)</span>,</span>
<span>  state <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NJ"</span>, <span class="st">"PA"</span><span class="op">)</span>,</span>
<span>  geography <span class="op">=</span> <span class="st">"county"</span></span>
<span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 8</span></span></span>
<span><span class="co">#&gt;    GEOID RPL_theme1 RPL_theme2 RPL_theme3 RPL_theme4 RPL_themes  year state</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 34001       0.95       0.8        0.65       1          0.95  <span style="text-decoration: underline;">2</span>017 NJ   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 34003       0.2        0.3        0.55       0.45       0.25  <span style="text-decoration: underline;">2</span>017 NJ   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 34005       0.3        0.5        0.35       0.4        0.3   <span style="text-decoration: underline;">2</span>017 NJ   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 34007       0.7        0.9        0.55       0.6        0.75  <span style="text-decoration: underline;">2</span>017 NJ   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 34009       0.65       0.6        0.1        0.55       0.45  <span style="text-decoration: underline;">2</span>017 NJ   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 34011       1          0.95       0.75       0.95       1     <span style="text-decoration: underline;">2</span>017 NJ   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 34013       0.9        0.75       0.85       0.85       0.9   <span style="text-decoration: underline;">2</span>017 NJ   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 34015       0.35       0.7        0.15       0.15       0.35  <span style="text-decoration: underline;">2</span>017 NJ   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 34017       0.75       0          1          0.75       0.7   <span style="text-decoration: underline;">2</span>017 NJ   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 34019       0          0.05       0.05       0.1        0     <span style="text-decoration: underline;">2</span>017 NJ</span></span></code></pre>
<p>As a result, we have (first 10 rows of) a table summarising the
county-level SVI of New Jersey for 2017 and that of Pennsylvania for
2018, after retrieving census data for these two year-state pairs.
Again, here data retrieval and SVI calculation (percentile ranking) are
performed separately for 2017-NJ and 2018-PA, and the resulting SVIs are
combined into a summarised table.</p>
<p>As other R functions that accepts vectors in their arguments, another
way to supply <code>year</code> and <code>state</code> pairs is to
extract columns from a table. Suppose we have a table called
<code>info_table</code> containing the year-state information we’d like
to include in the analysis:</p>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">#&gt;    year state</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">2</span>017 AZ   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">2</span>018 FL   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">2</span>014 FL   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;">2</span>018 PA   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;">2</span>013 MA   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>  <span style="text-decoration: underline;">2</span>020 KY</span></span></code></pre>
<p>We could extract specific columns of interest from
<code>info_table</code> for the <code>year</code> and <code>state</code>
arguments:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_svi.html">find_svi</a></span><span class="op">(</span></span>
<span>  year <span class="op">=</span> <span class="va">info_table</span><span class="op">$</span><span class="va">year</span>,</span>
<span>  state <span class="op">=</span> <span class="va">info_table</span><span class="op">$</span><span class="va">state</span>,</span>
<span>  geography <span class="op">=</span> <span class="st">"county"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This will likely make things easier especially for a long list of
year-state combinations.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Heli Xu.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
